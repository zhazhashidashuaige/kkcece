/* ▼▼▼ 【全新】游戏大厅样式 ▼▼▼ */
#game-hall-grid {
  display: grid;
  grid-template-columns: 1fr; /* 每行一个游戏 */
  gap: 15px; /* 游戏卡片之间的间距 */
}

.game-card {
  background-color: var(--secondary-bg);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  display: flex;
  align-items: center;
  gap: 15px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.game-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
}

.game-card .game-icon {
  font-size: 32px;
  width: 50px;
  height: 50px;
  flex-shrink: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: #f0f2f5;
  border-radius: 10px;
}

#phone-screen.dark-mode .game-card .game-icon {
  background-color: #2c2c2e;
}

.game-card .game-info .game-title {
  font-weight: 600;
  font-size: 16px;
  color: var(--text-primary);
}

.game-card .game-info .game-desc {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 4px;
}
/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】狼人杀游戏样式 ▼▼▼ */

/* 游戏设置页的玩家选择列表 */
.player-selection-item {
  display: flex;
  align-items: center;
  padding: 10px 15px;
  border-bottom: 1px solid var(--border-color);
}
.player-selection-item:last-child {
  border-bottom: none;
}
.player-selection-item input[type='checkbox'] {
  width: 20px;
  height: 20px;
  margin-right: 15px;
}
.player-selection-item img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 10px;
}
.player-selection-item .name {
  font-weight: 500;
}
.player-selection-item .type-tag {
  font-size: 11px;
  color: var(--text-secondary);
  background-color: #f0f0f0;
  padding: 2px 6px;
  border-radius: 4px;
  margin-left: auto;
}

/* 游戏主界面布局 */
#werewolf-game-content {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  padding: 10px;
  box-sizing: border-box;
}

/* 玩家座位网格 */
#werewolf-players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
  gap: 10px;
  padding: 10px;
  flex-shrink: 0;
}

.player-seat {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
}
.player-seat .player-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: 3px solid transparent;
  object-fit: cover;
  transition: all 0.3s ease;
}
.player-seat .player-avatar.speaking {
  border-color: #4cd964; /* 绿色边框表示正在发言 */
  box-shadow: 0 0 10px #4cd964;
}
.player-seat .player-avatar.dead {
  filter: grayscale(100%);
  opacity: 0.5;
}
.player-seat .player-name {
  font-size: 12px;
  font-weight: 500;
  text-align: center;
  max-width: 60px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.player-seat .player-role-indicator {
  position: absolute;
  top: -2px;
  right: -2px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background-color: #ff3b30; /* 红色代表狼人 */
  color: white;
  font-size: 12px;
  font-weight: bold;
  display: none; /* 默认隐藏 */
  justify-content: center;
  align-items: center;
  border: 1px solid white;
}

/* 游戏日志区域 */
#werewolf-log-container {
  flex-grow: 1;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 10px;
  padding: 10px;
  overflow-y: auto;
  margin: 10px 0;
  min-height: 0; /* flex布局下滚动的关键 */
}
.log-entry {
  padding: 6px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  font-size: 14px;
  line-height: 1.5;
}
.log-entry.system {
  color: var(--accent-color);
  font-weight: bold;
  text-align: center;
  background-color: rgba(0, 123, 255, 0.05);
  border-radius: 5px;
}
.log-entry.speech .speaker {
  font-weight: 600;
}

/* 玩家操作区 */
#werewolf-action-area {
  flex-shrink: 0;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  min-height: 50px;
}
#werewolf-action-area button {
  padding: 10px 20px;
}
#werewolf-action-area .vote-target-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}
#werewolf-action-area .vote-target-btn {
  padding: 8px 12px;
  font-size: 13px;
  background-color: #e9ecef;
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}
#werewolf-action-area .vote-target-btn.selected {
  background-color: var(--accent-color);
  color: white;
  border-color: var(--accent-color);
}
/* ▲▲▲ 狼人杀样式结束 ▲▲▲ */
/* ▼▼▼ 【全新】狼人杀发言日志美化样式 ▼▼▼ */

/* 包含头像和文字的总容器 */
.log-entry.speech {
  display: flex;
  align-items: flex-start; /* 顶部对齐 */
  gap: 10px; /* 头像和文字的间距 */
  padding: 8px 6px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* 每条发言之间的分割线 */
}

/* 发言者的圆形小头像 */
.speech-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%; /* 完美圆形 */
  flex-shrink: 0; /* 防止头像被压缩 */
  object-fit: cover;
}

/* 包裹名字和发言内容的新容器 */
.speech-content {
  display: flex;
  flex-direction: column; /* 名字和内容垂直排列 */
  gap: 2px;
}

/* 发言者名字的样式 */
.speech-content .speaker {
  font-weight: 600;
  font-size: 13px;
  color: var(--text-secondary); /* 使用次要文字颜色，不那么刺眼 */
}

/* 发言内容的样式 */
.speech-content .speech-text {
  word-break: break-word; /* 确保长篇发言能正确换行 */
  line-height: 1.6;
}

/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】海龟汤游戏样式 ▼▼▼ */

.sts-log-entry {
  padding: 8px 10px;
  margin-bottom: 8px;
  border-radius: 8px;
  line-height: 1.6;
}

/* 系统消息 (谜面、提示等) */
.sts-log-entry.system {
  background-color: #e9ecef;
  color: var(--text-secondary);
  text-align: center;
  font-weight: 500;
}
#phone-screen.dark-mode .sts-log-entry.system {
  background-color: #2c2c2e;
}

/* 玩家提问 */
.sts-log-entry.question {
  background-color: #fff;
  border: 1px solid var(--border-color);
}
#phone-screen.dark-mode .sts-log-entry.question {
  background-color: #1c1c1e;
}
.sts-log-entry .speaker {
  font-weight: 600;
  color: var(--accent-color);
}

/* ▼▼▼ 【全新】海龟汤 - 出题人回答气泡美化 ▼▼▼ */
.sts-log-entry.answer {
  text-align: right;
}
.sts-log-entry.answer .answer-text {
  display: inline-block;
  padding: 8px 12px; /* 增加内边距，让气泡更饱满 */
  border-radius: 18px; /* 增加圆角 */
  font-weight: 500; /* 字体不用太粗 */
  background-color: #f0f2f5; /* 统一的、中性的浅灰色背景 */
  color: var(--text-primary); /* 文字颜色使用主题的主色，适配夜间模式 */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.08); /* 稍微调整阴影 */
}

/* 移除旧的、按颜色区分的样式，确保所有回答都用上面的新样式 */
.sts-log-entry.answer .answer-text.yes,
.sts-log-entry.answer .answer-text.no,
.sts-log-entry.answer .answer-text.irrelevant {
  background-color: #f0f2f5; /* 确保所有都用这个颜色 */
}

/* 夜间模式适配 */
#phone-screen.dark-mode .sts-log-entry.answer .answer-text,
#phone-screen.dark-mode .sts-log-entry.answer .answer-text.yes,
#phone-screen.dark-mode .sts-log-entry.answer .answer-text.no,
#phone-screen.dark-mode .sts-log-entry.answer .answer-text.irrelevant {
  background-color: #3a3a3c; /* 夜间模式下的深灰色 */
}
/* ▲▲▲ 替换结束 ▲▲▲ */

/* AI猜测 */
.sts-log-entry.guess {
  font-style: italic;
  color: #fd7e14;
  border-left: 3px solid #fd7e14;
  padding-left: 12px;
}

/* 玩家座位上的身份指示器 */
.player-seat .player-role-indicator.riddle-master {
  background-color: #ffc107; /* 黄色代表出题人 */
  display: flex;
}
/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】海龟汤聊天日志美化样式 ▼▼▼ */
.sts-log-entry.question,
.sts-log-entry.answer,
.sts-log-entry.guess {
  display: flex;
  align-items: flex-start; /* 头像和气泡顶部对齐 */
  gap: 10px;
  max-width: 85%;
  margin-bottom: 12px;
}

/* 提问和猜测靠左 */
.sts-log-entry.question,
.sts-log-entry.guess {
  align-self: flex-start;
}

/* 回答靠右 */
.sts-log-entry.answer {
  align-self: flex-end;
  flex-direction: row-reverse; /* 关键：让头像在右边 */
}

/* 头像样式 */
.sts-log-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

/* ▼▼▼ 【全新】海龟汤聊天日志美化样式 (气泡透明版) ▼▼▼ */
.sts-log-entry.question .sts-log-content,
.sts-log-entry.guess .sts-log-content {
  background-color: transparent; /* <-- 修改点1：背景改为透明 */
  border-radius: 8px;
  padding: 8px 12px;
  border: none; /* <-- 修改点2：移除边框，让它彻底“消失” */
}

#phone-screen.dark-mode .sts-log-entry.question .sts-log-content,
#phone-screen.dark-mode .sts-log-entry.guess .sts-log-content {
  background-color: #1c1c1e;
}

/* 修正回答气泡的样式，因为它不是一个完整的块 */
.sts-log-entry.answer .answer-text {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
.player-seat .player-avatar.active-turn {
  border-color: #007bff; /* 使用主题色作为边框颜色 */
  box-shadow: 0 0 15px rgba(0, 123, 255, 0.7); /* 添加发光效果 */
  animation: sts-pulse-glow 1.5s infinite ease-in-out; /* 应用动画 */
}

@keyframes sts-pulse-glow {
  0%,
  100% {
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.7);
  }
  50% {
    box-shadow: 0 0 25px rgba(0, 123, 255, 1);
  }
}
/* ▼▼▼ 【海龟汤布局修复】请将这段新样式粘贴到 <style> 的末尾 ▼▼▼ */
#sts-game-log {
  display: flex;
  flex-direction: column;
}
/* ▲▲▲ 修复结束 ▲▲▲ */
/* ▼▼▼ 【全新】海龟汤聊天日志美化样式 ▼▼▼ */
.sts-log-entry.question,
.sts-log-entry.answer,
.sts-log-entry.guess {
  display: flex;
  align-items: flex-start; /* 头像和气泡顶部对齐 */
  gap: 10px;
  max-width: 85%;
  margin-bottom: 12px;
  /* 移除旧的背景和边框，因为现在由子元素处理 */
  background-color: transparent;
  border: none;
}

/* 提问和猜测（猜题方）靠左 */
.sts-log-entry.question,
.sts-log-entry.guess {
  align-self: flex-start;
}

/* 回答（出题人）靠右 */
.sts-log-entry.answer {
  align-self: flex-end;
  flex-direction: row-reverse; /* 关键：让头像在右边 */
}

/* 头像样式 */
.sts-log-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

/* 包含发言人和内容的气泡 */
.sts-log-entry.question .sts-log-content,
.sts-log-entry.guess .sts-log-content {
  background-color: #fff;
  border-radius: 8px;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
}

#phone-screen.dark-mode .sts-log-entry.question .sts-log-content,
#phone-screen.dark-mode .sts-log-entry.guess .sts-log-content {
  background-color: #1c1c1e;
}

/* 修正回答气泡的样式，因为它不是一个完整的块 */
.sts-log-entry.answer .answer-text {
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 让日志容器支持flex布局的对齐 */
#sts-game-log {
  display: flex;
  flex-direction: column;
}
/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【海龟汤输入区终极修复版】 ▼▼▼ */

/* 1. 强制重置整个输入区域的布局为“横向排列”并“垂直居中” */
#sts-action-area {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important; /* 核心修正：从 flex-end 改为 center，实现垂直居中 */
  gap: 8px !important;
}

/* 2. 强制内部的 main-row 也垂直居中，并让它填满空间 */
#sts-action-area .chat-input-main-row {
  flex-grow: 1 !important;
  display: flex !important;
  align-items: center !important; /* 核心修正：内部也保持垂直居中 */
  gap: 8px !important;
}

/* 3. 美化输入框本身，并让它自动撑满宽度 */
#sts-action-area #sts-question-input {
  flex-grow: 1;
  border: none;
  padding: 10px 15px;
  border-radius: 20px;
  background-color: var(--secondary-bg);
  font-size: 16px;
  resize: none;
  max-height: 100px;
  line-height: 1.5;
}

/* 4. 统一所有按钮的高度和样式，让它们和输入框完美适配 */
#sts-action-area #guess-sts-answer-btn,
#sts-action-area #send-sts-question-btn {
  height: 40px;
  border-radius: 20px;
  padding: 0 15px;
  flex-shrink: 0;
  font-size: 14px;
  font-weight: 600;
}

/* 5. 夜间模式适配 */
#phone-screen.dark-mode #sts-action-area #sts-question-input {
  background-color: #2c2c2e;
  color: var(--text-primary);
}
/* ▲▲▲ 修复结束 ▲▲▲ */
/* ▼▼▼ 【全新】剧本杀游戏样式 ▼▼▼ */

/* 游戏主界面布局 */
#script-kill-game-content {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  padding: 10px;
  box-sizing: border-box;
}

/* 玩家座位区 (复用狼人杀的样式) */
#script-kill-players-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
  gap: 10px;
  padding: 10px;
  flex-shrink: 0;
}

/* 游戏日志区 (复用狼人杀的样式) */
#script-kill-log-container {
  flex-grow: 1;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 10px;
  padding: 10px;
  overflow-y: auto;
  margin: 10px 0;
  min-height: 0; /* flex布局下滚动的关键 */
}

/* 玩家操作区 (复用狼人杀的样式) */
#script-kill-action-area {
  flex-shrink: 0;
  padding: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 15px;
  min-height: 50px;
}
#script-kill-action-area button {
  padding: 10px 20px;
}

/* 投票选项样式 */
#sk-vote-options-list label {
  display: block;
  padding: 8px;
  border-radius: 6px;
  cursor: pointer;
}
#sk-vote-options-list label:hover {
  background-color: #f0f2f5;
}
#phone-screen.dark-mode #sk-vote-options-list label:hover {
  background-color: #2c2c2e;
}

/* 线索卡片样式 */
.sk-evidence-card {
  background-color: var(--secondary-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
.sk-evidence-card .source {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 8px;
}
.sk-evidence-card .description {
  font-size: 14px;
  line-height: 1.6;
}

/* ▲▲▲ 剧本杀样式结束 ▲▲▲ */
/* ▼▼▼ 把这一整块全新的CSS，粘贴到 <style> 标签的最末尾 ▼▼▼ */

/* 【全新】剧本杀可视化编辑器样式 */

/* 角色/线索卡片的容器 */
.sk-item-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
  background-color: #f0f2f5;
  padding: 10px;
  border-radius: 8px;
  min-height: 50px;
  border: 1px solid var(--border-color);
}
#phone-screen.dark-mode .sk-item-container {
  background-color: #2c2c2e;
}

/* 单个角色/线索的卡片 */
.sk-editor-item {
  background-color: var(--secondary-bg);
  padding: 10px 15px;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.sk-editor-item .item-info .item-name {
  font-weight: 600;
}
.sk-editor-item .item-info .item-meta {
  font-size: 12px;
  color: var(--text-secondary);
}

/* 卡片上的编辑/删除按钮 */
.sk-editor-item .item-actions {
  display: flex;
  gap: 8px;
}
.sk-editor-item .item-actions button {
  padding: 4px 8px;
  font-size: 13px;
  border-radius: 5px;
  cursor: pointer;
}

/* ▲▲▲ 新增CSS结束 ▲▲▲ */
/* ▼▼▼ 【全新】“你说我猜”游戏样式 ▼▼▼ */

/* 游戏日志区域 */
#guess-what-game-log {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 单条日志条目 */
.guess-log-entry {
  padding: 8px 12px;
  border-radius: 12px;
  line-height: 1.6;
  max-width: 90%;
  word-break: break-word;
}

/* 系统提示，例如游戏开始、谁的回合 */
.guess-log-entry.system {
  background-color: #e9ecef;
  color: var(--text-secondary);
  text-align: center;
  font-weight: 500;
  font-size: 13px;
  align-self: center;
}
#phone-screen.dark-mode .guess-log-entry.system {
  background-color: #2c2c2e;
}

/* 玩家发言的气泡（通用） */
.guess-log-entry.user-turn,
.guess-log-entry.ai-turn {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

/* 玩家发言内容 */
.guess-log-entry .bubble {
  background-color: #fff;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--border-color);
}
#phone-screen.dark-mode .guess-log-entry .bubble {
  background-color: #2c2c2e;
}

/* AI发言气泡（靠左） */
.guess-log-entry.ai-turn {
  align-self: flex-start;
}

/* 用户发言气泡（靠右） */
.guess-log-entry.user-turn {
  align-self: flex-end;
  flex-direction: row-reverse; /* 头像在右边 */
}
.guess-log-entry.user-turn .bubble {
  background-color: #dcf8c6; /* 类似微信的绿色 */
}
#phone-screen.dark-mode .guess-log-entry.user-turn .bubble {
  background-color: #3b5b32; /* 夜间模式下的绿色 */
}

/* 气泡内的头像 */
.guess-log-entry .avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* 气泡内的名字和内容 */
.guess-log-entry .name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

/* 游戏输入区美化 */
#guess-what-action-area {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important; /* 保持垂直居中 */
  gap: 8px !important;
  width: 100%; /* 新增：让整个容器撑满宽度 */
  box-sizing: border-box; /* 新增：确保内边距和边框被正确计算在内 */
}

#guess-what-action-area #guess-what-user-input {
  flex-grow: 1;
  border: none;
  padding: 10px 15px;
  border-radius: 20px;
  background-color: var(--secondary-bg);
  font-size: 16px;
  resize: none;
  max-height: 100px;
  line-height: 1.5;
}
#guess-what-action-area #send-guess-what-input-btn {
  height: 40px;
  border-radius: 20px;
  padding: 0 15px;
  flex-shrink: 0;
  font-size: 14px;
  font-weight: 600;
}
#phone-screen.dark-mode #guess-what-action-area #guess-what-user-input {
  background-color: #2c2c2e;
  color: var(--text-primary);
}

/* ▲▲▲ “你说我猜”游戏样式结束 ▲▲▲ */
/* ▼▼▼ 【剧本杀AI生成器布局修复】请将这整块全新的CSS粘贴到 <style> 标签的最末尾 ▼▼▼ */

/* 1. 【核心】让整个弹窗的内容区(modal-body)能够正确地撑满剩余空间并滚动 */
#sk-ai-generator-modal .modal-body {
  flex-grow: 1; /* 允许内容区占据 header 和 footer 之间的所有可用垂直空间 */
  min-height: 0; /* 解决flex布局中一个常见的滚动条失效问题，非常关键 */
  /* overflow-y: auto;  <-- 这个属性你的 .modal-body 已经有了，所以不用重复写 */
}

/* 2. 【核心】指定包含“预览框”的那个 form-group 也需要能够弹性增长 */
/* 我们用 :last-of-type 精准定位到最后一个 .form-group */
#sk-ai-generator-modal .modal-body .form-group:last-of-type {
  flex-grow: 1; /* 让它吃掉所有剩余的垂直空间 */
  min-height: 0; /* 同样是为了兼容性 */
  display: flex; /* 把它自己也变成flex容器 */
  flex-direction: column; /* 让它里面的 label 和 preview 垂直排列 */
}

/* 3. 【核心】最后，确保预览框本身能够撑满它的父容器，并且在内容过多时自己滚动 */
#sk-ai-result-preview {
  flex-grow: 1; /* 撑满父容器(.form-group)的空间 */
  overflow-y: auto; /* 当代码超出时，显示它自己的滚动条，而不是让整个弹窗滚动 */

  /* (可选美化) 给一个最小高度，防止在没内容时完全塌陷 */
  min-height: 100px;
}

/* ▲▲▲ 粘贴结束 ▲▲▲ */

/* ▼▼▼ 【游戏输入区终极修复版】 ▼▼▼ */

/* 1. 强制重置两个游戏输入区域的容器布局 */
#sts-action-area,
#guess-what-action-area {
  display: flex !important;
  flex-direction: row !important; /* 关键：从纵向改为横向 */
  align-items: center !important; /* 关键：让所有子元素垂直居中 */
  gap: 8px !important; /* 设置元素之间的间距 */
  width: 100%; /* 新增：让整个容器宽度撑满 */
  box-sizing: border-box; /* 新增：确保内边距和边框被正确计算 */
}

/* 2. 强制内部的 .chat-input-main-row 也能正确伸展和对齐 */
#sts-action-area .chat-input-main-row,
#guess-what-action-area .chat-input-main-row {
  flex-grow: 1 !important;
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
}

/* 3. 美化输入框本身，并让它自动撑满宽度 */
#sts-action-area #sts-question-input,
#guess-what-action-area #guess-what-user-input {
  flex-grow: 1; /* 核心：让输入框自动伸展，占满所有可用宽度 */
  min-height: 40px; /* 保证最小高度 */
  border: none;
  padding: 10px 15px;
  border-radius: 20px;
  background-color: var(--secondary-bg);
  font-size: 16px;
  resize: none;
  max-height: 100px;
  line-height: 1.5;
  box-sizing: border-box;
}

/* 4. 统一所有按钮的高度和样式，让它们和输入框完美适配 */
#sts-action-area button,
#guess-what-action-area button {
  height: 40px;
  border-radius: 20px;
  padding: 0 15px;
  flex-shrink: 0; /* 防止按钮被压缩 */
  font-size: 14px;
  font-weight: 600;
}

/* 5. 夜间模式适配 */
#phone-screen.dark-mode #sts-action-area #sts-question-input,
#phone-screen.dark-mode #guess-what-action-area #guess-what-user-input {
  background-color: #2c2c2e;
  color: var(--text-primary);
}
/* ▲▲▲ 修复结束 ▲▲▲ */
/* === 【独家定制】隐藏游戏大厅返回按钮的 "退出" 文字 === */
#exit-werewolf-game-btn,
#exit-sts-game-btn,
#exit-script-kill-game-btn,
#exit-guess-what-game-btn,
#exit-ludo-game-btn,
#exit-undercover-game-btn {
  /* <--- 修改在这里 */
  font-size: 0 !important;
  color: transparent !important;
}

#exit-werewolf-game-btn::before,
#exit-sts-game-btn::before,
#exit-script-kill-game-btn::before,
#exit-guess-what-game-btn::before,
#exit-ludo-game-btn::before,
#exit-undercover-game-btn::before {
  /* <--- 还有这里 */
  content: '‹';
  font-size: 24px !important;
  color: var(--accent-color) !important;
}

/* ▼▼▼ 【V3最终版】游戏发言输入区通用美化样式 (已居中) ▼▼▼ */

/* 1. 让所有游戏的发言区域容器都水平居中 */
#werewolf-action-area.speaking-mode,
#script-kill-action-area.speaking-mode,
#undercover-action-area.speaking-mode {
  /* ★ 新增了 #undercover-action-area */
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 10px 12px !important; /* 增加上下内边距，让区域不贴底 */
  box-sizing: border-box;
  justify-content: center; /* ★★★ 这就是实现居中的核心代码！ ★★★ */
}

/* 2. 美化所有游戏的发言输入框 */
#werewolf-action-area.speaking-mode #user-speech-input,
#script-kill-action-area.speaking-mode #user-sk-speech-input,
#undercover-action-area.speaking-mode #undercover-user-speech-input {
  /* ★★★ 核心修改：我们移除了 flex-grow: 1; 属性！★★★ */
  /* 这样输入框就不会无限伸展，而是保持一个自然的宽度 */

  border: 1px solid #ccc; /* 增加一个淡淡的边框，让它更清晰 */
  padding: 10px 15px;
  border-radius: 20px;
  background-color: var(--secondary-bg);
  font-size: 16px;
  resize: none;
  max-height: 100px;
  line-height: 1.5;
  width: auto; /* 确保宽度是自适应的 */
  height: auto;
  min-width: 200px; /* 给一个最小宽度，防止内容少时太窄 */
}

/* 3. 美化所有游戏的“发言/结束发言”按钮 */
#werewolf-action-area.speaking-mode #end-speech-btn,
#script-kill-action-area.speaking-mode #sk-end-speech-btn,
#undercover-action-area.speaking-mode #undercover-end-speech-btn {
  height: 40px;
  border-radius: 20px;
  padding: 0 20px; /* 增加左右内边距，让按钮更饱满 */
  flex-shrink: 0;
  font-size: 14px;
  font-weight: 600;
  margin: 0 !important;
  width: auto !important;
  background-color: var(--accent-color);
  color: white;
  border: none;
}

/* 4. 夜间模式适配 */
#phone-screen.dark-mode #werewolf-action-area.speaking-mode #user-speech-input,
#phone-screen.dark-mode #script-kill-action-area.speaking-mode #user-sk-speech-input,
#phone-screen.dark-mode #undercover-action-area.speaking-mode #undercover-user-speech-input {
  background-color: #2c2c2e;
  color: var(--text-primary);
  border-color: #444; /* 夜间模式下的边框颜色 */
}

/* ▲▲▲ 最终版样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】心动飞行棋样式 ▼▼▼ */

/* --- 游戏主界面布局 --- */
#ludo-game-content {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  padding: 15px;
  box-sizing: border-box;
  gap: 15px;
  background-color: #fff0f5; /* 温柔的淡粉色背景 */
}

#phone-screen.dark-mode #ludo-game-content {
  background-color: #2c1e22; /* 夜间模式下的深粉紫色 */
}

/* --- 棋盘容器与棋盘本身 --- */
#ludo-board-container {
  position: relative;
  width: 100%;
  height: 280px; /* 给棋盘一个固定的高度 */
  flex-shrink: 0;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 10px;
  padding: 10px;
  box-sizing: border-box;
}

#ludo-board {
  display: grid;
  grid-template-columns: repeat(10, 1fr); /* 10x6的网格布局 */
  grid-template-rows: repeat(6, 1fr);
  width: 100%;
  height: 100%;
  gap: 3px;
}

/* --- 棋盘格子样式 --- */
.ludo-cell {
  border-radius: 4px;
  background-color: rgba(255, 192, 203, 0.3); /* 淡淡的粉色格子 */
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 14px;
  font-weight: bold;
  color: #db7093;
}

/* 起点和终点格子 */
.ludo-cell.start {
  background-color: #90ee90;
  color: #2e8b57;
}
.ludo-cell.end {
  background-color: #ffd700;
  color: #b8860b;
}

/* 特殊事件格子 */
.ludo-cell.event-truth {
  background-color: #ffb6c1;
} /* 真心话 */
.ludo-cell.event-dare {
  background-color: #add8e6;
} /* 大冒险 */
.ludo-cell.event-kiss {
  background-color: #ff69b4;
} /* 亲亲 */
.ludo-cell.event-hug {
  background-color: #ffdab9;
} /* 抱抱 */

.ludo-cell .cell-number {
  font-size: 10px;
  position: absolute;
  top: 2px;
  left: 3px;
  color: rgba(0, 0, 0, 0.2);
}

/* --- 棋子样式 --- */
.ludo-piece {
  position: absolute;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background-size: cover;
  background-position: center;
  border: 2px solid white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: 10;
}
.ludo-piece.user {
  border-color: #87cefa;
}
.ludo-piece.char {
  border-color: #ffc0cb;
}

/* --- 游戏日志 --- */
#ludo-log-container {
  flex-grow: 1;
  background-color: rgba(255, 255, 255, 0.5);
  border-radius: 10px;
  padding: 10px;
  overflow-y: auto;
  min-height: 0;
}
#ludo-game-log .log-entry {
  padding: 6px 8px;
  font-size: 14px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  line-height: 1.5;
}
#ludo-game-log .log-entry.system {
  color: #db7093;
  font-style: italic;
  text-align: center;
}
#ludo-game-log .log-entry.user {
  color: #007bff;
}
#ludo-game-log .log-entry.char {
  color: #e83e8c;
}
#ludo-game-log .log-entry strong {
  font-weight: 900;
}

/* --- 操作区与骰子动画 --- */
#ludo-action-area {
  flex-shrink: 0;
  padding: 10px 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60px;
}
#ludo-dice-container {
  perspective: 1000px;
}
.dice {
  width: 50px;
  height: 50px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 1s;
  cursor: pointer;
}
.dice.rolling {
  animation: roll-dice 1.5s ease-out;
}
@keyframes roll-dice {
  0% {
    transform: rotateX(0deg) rotateY(0deg);
  }
  100% {
    transform: rotateX(1080deg) rotateY(720deg);
  }
}
.dice .face {
  position: absolute;
  width: 50px;
  height: 50px;
  border: 1px solid #ccc;
  background: white;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  font-weight: bold;
}
.face.front {
  transform: rotateY(0deg) translateZ(25px);
}
.face.back {
  transform: rotateY(180deg) translateZ(25px);
}
.face.right {
  transform: rotateY(90deg) translateZ(25px);
}
.face.left {
  transform: rotateY(-90deg) translateZ(25px);
}
.face.top {
  transform: rotateX(90deg) translateZ(25px);
}
.face.bottom {
  transform: rotateX(-90deg) translateZ(25px);
}

/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】飞行棋问题类型标签样式 ▼▼▼ */
.question-type-tag {
  font-size: 10px;
  font-weight: bold;
  padding: 3px 8px;
  border-radius: 10px;
  color: white;
  margin-left: 10px;
  flex-shrink: 0;
}
.question-type-tag.both-answer {
  background-color: #ff8fab; /* 粉色代表共同回答 */
}
.question-type-tag.single-answer {
  background-color: #87ceeb; /* 蓝色代表一人回答 */
}
/* ▲▲▲ 新样式粘贴结束 ▲▲▲ */
/* ▼▼▼ 【全新】飞行棋结算卡片样式 ▼▼▼ */
#ludo-summary-content h3 {
  text-align: center;
  color: var(--accent-color);
  margin-bottom: 15px;
  font-size: 20px;
  font-weight: bold;
}
#ludo-summary-content .ludo-qa-log {
  margin-top: 20px;
  padding-top: 15px;
  border-top: 1px solid var(--border-color);
  max-height: 300px; /* 给问答记录一个最大高度，内容多了可以滚动 */
  overflow-y: auto;
}
#ludo-summary-content h4 {
  margin-bottom: 10px;
  color: var(--text-primary);
}
#ludo-summary-content .qa-item {
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px dashed #eee;
}
#ludo-summary-content .qa-item:last-child {
  border-bottom: none;
}
#ludo-summary-content .qa-question {
  font-weight: 600;
  color: #db7093; /* 一个可爱的粉紫色 */
  margin-bottom: 8px;
}
#ludo-summary-content .qa-answer {
  padding-left: 15px;
  font-size: 14px;
  color: var(--text-secondary);
}
#ludo-summary-content .qa-answer strong {
  color: var(--text-primary);
}
#phone-screen.dark-mode #ludo-summary-content .qa-answer {
  color: #bbb;
}
/* ▼▼▼ 【全新】“谁是卧底”游戏样式 ▼▼▼ */

/* 玩家头像上显示角色身份的小图标 */
.player-seat .player-role-display {
  position: absolute;
  bottom: 0;
  right: 0;
  background-color: rgba(0, 0, 0, 0.6);
  color: white;
  font-size: 10px;
  padding: 2px 5px;
  border-radius: 5px;
  font-weight: bold;
}

/* “你说我猜”发言输入区的美化 */
#undercover-action-area.speaking-mode {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 0;
}
#undercover-action-area.speaking-mode #undercover-user-speech-input {
  flex-grow: 1;
  border: none;
  padding: 10px 15px;
  border-radius: 20px;
  background-color: var(--secondary-bg);
  font-size: 16px;
  resize: none;
  max-height: 100px;
  line-height: 1.5;
  width: auto !important;
  height: auto !important;
}
#undercover-action-area.speaking-mode #undercover-end-speech-btn {
  height: 40px;
  border-radius: 20px;
  padding: 0 15px;
  flex-shrink: 0;
  font-size: 14px;
  font-weight: 600;
  margin: 0 !important;
  width: auto !important;
  background-color: var(--accent-color);
  color: white;
  border: none;
}
#phone-screen.dark-mode #undercover-action-area.speaking-mode #undercover-user-speech-input {
  background-color: #2c2c2e;
  color: var(--text-primary);
}
/* ▼▼▼ 【独家定制】心动飞行棋输入框 - 粉色按钮版 v1.0 ▼▼▼ */

/* 1. 输入区域的容器样式 (保持不变) */
#ludo-action-area {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    gap: 8px !important;
    padding: 10px 12px !important;
}

/* 2. 文本输入框的样式 (保持不变) */
#ludo-action-area #ludo-user-speech-input {
    flex-grow: 1; 
    border: none;
    padding: 10px 15px;
    border-radius: 20px;
    background-color: var(--secondary-bg);
    font-size: 16px;
    resize: none;
    max-height: 100px; 
    line-height: 1.5;
    box-sizing: border-box;
}

/* 3. “确认回答”按钮的样式 (已修改为粉色) */
#ludo-action-area .form-button {
    width: auto !important;
    height: 40px; 
    border-radius: 20px;
    padding: 0 20px;
    flex-shrink: 0; 
    font-size: 14px;
    font-weight: 600;
    margin: 0 !important;
    border: none;
    cursor: pointer;
    
    /* ★★★ 核心修改：使用可爱的粉色渐变和阴影 ★★★ */
    background: linear-gradient(135deg, #ff8fab, #fb6f92);
    color: white;
    box-shadow: 0 4px 10px rgba(251, 111, 146, 0.3);
    transition: all 0.2s ease-in-out;
}

/* ★★★ 新增：为按钮添加更生动的交互效果 ★★★ */
#ludo-action-area .form-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(251, 111, 146, 0.4);
}
#ludo-action-area .form-button:active {
    transform: translateY(0) scale(0.98);
    box-shadow: 0 2px 5px rgba(251, 111, 146, 0.3);
}

/* 4. 夜间模式适配 (保持不变) */
#phone-screen.dark-mode #ludo-action-area #ludo-user-speech-input {
    background-color: #2c2c2e;
    color: var(--text-primary);
}
/* ▲▲▲ 美化代码结束 ▲▲▲ */
/* ▼▼▼ 【全新】心声面板背景图样式 ▼▼▼ */
#inner-voice-main-panel.modal-content {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    /* 我们给它加一个过渡效果，让背景切换更平滑 */
    transition: background-image 0.3s ease-in-out;
}
/* ▲▲▲ 新增CSS结束 ▲▲▲ */
